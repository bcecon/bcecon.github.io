<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ECON 340 Survey</title>
  <link rel="stylesheet" href="bulma.css" />
  <style>
    body {
      padding: 1.25rem;
      background-color: #f5f7fb;
    }

    .survey-card {
      max-width: 880px;
      margin: 0 auto;
      background: #ffffff;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
      padding: 1.75rem 1.5rem 0.5rem;
    }

    .page-title {
      font-size: 1.8rem;
      font-weight: 700;
      color: #1c4982;
      margin-bottom: 0.25rem;
    }

    .page-subtitle {
      font-size: 0.95rem;
      color: #4a4a4a;
      margin-bottom: 1.2rem;
    }

    .section-title {
      color: #1c4982;
      font-size: 1.4rem;
      margin-top: 1.75rem;
      margin-bottom: 0.25rem;
    }

    .legend {
      font-size: 0.9rem;
      color: #4a4a4a;
      margin-bottom: 0.75rem;
    }

    .question-block {
      padding: 1rem 0.75rem 0.75rem;
      border-bottom: 1px solid #e5e5e5;
    }

    .question-block:last-of-type {
      border-bottom: none;
      padding-bottom: 0;
    }

    .label {
      font-weight: 600;
      color: #363636;
      margin-bottom: 0.4rem;
    }

    .control .radio {
      display: inline-block;
      margin-right: 1.5rem;
      margin-bottom: 0.3rem;
    }

    .sticky-submit {
      position: sticky;
      bottom: 0;
      background: rgba(245, 247, 251, 0.96);
      padding: 0.75rem 0.5rem;
      border-top: 1px solid #dde1ea;
      backdrop-filter: blur(4px);
      margin-top: 1.5rem;
    }

    .required-note {
      font-size: 0.8rem;
      color: #b22222;
      margin-bottom: 0.75rem;
    }

    .help.is-info {
      margin-top: 0.35rem;
    }

    #message {
      max-width: 880px;
      margin: 1rem auto 0;
    }
  </style>
</head>
<body>
  <section class="section">
    <div class="container">
      <form id="form" class="survey-card" action="#" method="POST">
        <h1 class="page-title">ECON 340 – Environmental Attitudes Survey</h1>
        <p class="page-subtitle">
          This short survey asks about your concerns, policy views, and agreement with several statements.
          <br><strong>All questions are required.</strong>
        </p>
        <p class="required-note">* Please select one option for every question before submitting.</p>

        <!-- ===================== A. Concern ===================== -->
        <h2 class="section-title">A. Concern</h2>
        <p class="legend">For each item, select your level of concern.</p>

        <div class="question-block field">
          <label class="label">How concerned are you about air quality?</label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="concern_01" value="Very concerned" required>
              Very concerned
            </label>
            <label class="radio">
              <input type="radio" name="concern_01" value="Somewhat concerned">
              Somewhat concerned
            </label>
            <label class="radio">
              <input type="radio" name="concern_01" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="concern_01" value="Somewhat unconcerned">
              Somewhat unconcerned
            </label>
            <label class="radio">
              <input type="radio" name="concern_01" value="Not at all concerned">
              Not at all concerned
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">How concerned are you about environmental justice?</label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="concern_02" value="Very concerned" required>
              Very concerned
            </label>
            <label class="radio">
              <input type="radio" name="concern_02" value="Somewhat concerned">
              Somewhat concerned
            </label>
            <label class="radio">
              <input type="radio" name="concern_02" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="concern_02" value="Somewhat unconcerned">
              Somewhat unconcerned
            </label>
            <label class="radio">
              <input type="radio" name="concern_02" value="Not at all concerned">
              Not at all concerned
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">How concerned are you about renewable energy?</label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="concern_03" value="Very concerned" required>
              Very concerned
            </label>
            <label class="radio">
              <input type="radio" name="concern_03" value="Somewhat concerned">
              Somewhat concerned
            </label>
            <label class="radio">
              <input type="radio" name="concern_03" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="concern_03" value="Somewhat unconcerned">
              Somewhat unconcerned
            </label>
            <label class="radio">
              <input type="radio" name="concern_03" value="Not at all concerned">
              Not at all concerned
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">How concerned are you about mining impacts?</label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="concern_04" value="Very concerned" required>
              Very concerned
            </label>
            <label class="radio">
              <input type="radio" name="concern_04" value="Somewhat concerned">
              Somewhat concerned
            </label>
            <label class="radio">
              <input type="radio" name="concern_04" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="concern_04" value="Somewhat unconcerned">
              Somewhat unconcerned
            </label>
            <label class="radio">
              <input type="radio" name="concern_04" value="Not at all concerned">
              Not at all concerned
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">How concerned are you about solid waste?</label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="concern_05" value="Very concerned" required>
              Very concerned
            </label>
            <label class="radio">
              <input type="radio" name="concern_05" value="Somewhat concerned">
              Somewhat concerned
            </label>
            <label class="radio">
              <input type="radio" name="concern_05" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="concern_05" value="Somewhat unconcerned">
              Somewhat unconcerned
            </label>
            <label class="radio">
              <input type="radio" name="concern_05" value="Not at all concerned">
              Not at all concerned
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">How concerned are you about hazardous waste?</label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="concern_06" value="Very concerned" required>
              Very concerned
            </label>
            <label class="radio">
              <input type="radio" name="concern_06" value="Somewhat concerned">
              Somewhat concerned
            </label>
            <label class="radio">
              <input type="radio" name="concern_06" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="concern_06" value="Somewhat unconcerned">
              Somewhat unconcerned
            </label>
            <label class="radio">
              <input type="radio" name="concern_06" value="Not at all concerned">
              Not at all concerned
            </label>
          </div>
        </div>

        <!-- ===================== B. Policy Support ===================== -->
        <h2 class="section-title">B. Policy Support</h2>
        <p class="legend">Indicate your level of support/opposition.</p>

        <div class="question-block field">
          <label class="label">
            Establish strict limits on the release of methane in the production of natural gas.
          </label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="favor_01" value="Strongly favor" required>
              Strongly favor
            </label>
            <label class="radio">
              <input type="radio" name="favor_01" value="Somewhat favor">
              Somewhat favor
            </label>
            <label class="radio">
              <input type="radio" name="favor_01" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="favor_01" value="Somewhat oppose">
              Somewhat oppose
            </label>
            <label class="radio">
              <input type="radio" name="favor_01" value="Strongly oppose">
              Strongly oppose
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">
            For environmental problems, there should be international agreements that U.S. and other
            countries should be made to follow.
          </label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="favor_02" value="Strongly favor" required>
              Strongly favor
            </label>
            <label class="radio">
              <input type="radio" name="favor_02" value="Somewhat favor">
              Somewhat favor
            </label>
            <label class="radio">
              <input type="radio" name="favor_02" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="favor_02" value="Somewhat oppose">
              Somewhat oppose
            </label>
            <label class="radio">
              <input type="radio" name="favor_02" value="Strongly oppose">
              Strongly oppose
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">
            Spend federal money to increase the number of electric vehicle charging stations in the U.S.
          </label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="favor_03" value="Strongly favor" required>
              Strongly favor
            </label>
            <label class="radio">
              <input type="radio" name="favor_03" value="Somewhat favor">
              Somewhat favor
            </label>
            <label class="radio">
              <input type="radio" name="favor_03" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="favor_03" value="Somewhat oppose">
              Somewhat oppose
            </label>
            <label class="radio">
              <input type="radio" name="favor_03" value="Strongly oppose">
              Strongly oppose
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">Tax imports based on the greenhouse gases used to make them.</label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="favor_04" value="Strongly favor" required>
              Strongly favor
            </label>
            <label class="radio">
              <input type="radio" name="favor_04" value="Somewhat favor">
              Somewhat favor
            </label>
            <label class="radio">
              <input type="radio" name="favor_04" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="favor_04" value="Somewhat oppose">
              Somewhat oppose
            </label>
            <label class="radio">
              <input type="radio" name="favor_04" value="Strongly oppose">
              Strongly oppose
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">Set higher fuel efficiency standards for cars, trucks and buses.</label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="favor_05" value="Strongly favor" required>
              Strongly favor
            </label>
            <label class="radio">
              <input type="radio" name="favor_05" value="Somewhat favor">
              Somewhat favor
            </label>
            <label class="radio">
              <input type="radio" name="favor_05" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="favor_05" value="Somewhat oppose">
              Somewhat oppose
            </label>
            <label class="radio">
              <input type="radio" name="favor_05" value="Strongly oppose">
              Strongly oppose
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">
            Provide tax incentives to businesses to promote their use of wind, solar and nuclear power.
          </label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="favor_06" value="Strongly favor" required>
              Strongly favor
            </label>
            <label class="radio">
              <input type="radio" name="favor_06" value="Somewhat favor">
              Somewhat favor
            </label>
            <label class="radio">
              <input type="radio" name="favor_06" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="favor_06" value="Somewhat oppose">
              Somewhat oppose
            </label>
            <label class="radio">
              <input type="radio" name="favor_06" value="Strongly oppose">
              Strongly oppose
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">
            Provide tax credits to Americans who install clean energy systems, like solar power, in their homes.
          </label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="favor_07" value="Strongly favor" required>
              Strongly favor
            </label>
            <label class="radio">
              <input type="radio" name="favor_07" value="Somewhat favor">
              Somewhat favor
            </label>
            <label class="radio">
              <input type="radio" name="favor_07" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="favor_07" value="Somewhat oppose">
              Somewhat oppose
            </label>
            <label class="radio">
              <input type="radio" name="favor_07" value="Strongly oppose">
              Strongly oppose
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">
            Provide tax credits to individuals who purchase electric vehicles.
          </label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="favor_08" value="Strongly favor" required>
              Strongly favor
            </label>
            <label class="radio">
              <input type="radio" name="favor_08" value="Somewhat favor">
              Somewhat favor
            </label>
            <label class="radio">
              <input type="radio" name="favor_08" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="favor_08" value="Somewhat oppose">
              Somewhat oppose
            </label>
            <label class="radio">
              <input type="radio" name="favor_08" value="Strongly oppose">
              Strongly oppose
            </label>
          </div>
        </div>

        <!-- ===================== C. Agreement ===================== -->
        <h2 class="section-title">C. Agreement</h2>
        <p class="legend">State your level of agreement with each statement.</p>

        <div class="question-block field">
          <label class="label">
            Regulation in the U.S. should be implemented to address environmental justice concerns.
          </label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="agree_01" value="Strongly agree" required>
              Strongly agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_01" value="Somewhat agree">
              Somewhat agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_01" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="agree_01" value="Somewhat disagree">
              Somewhat disagree
            </label>
            <label class="radio">
              <input type="radio" name="agree_01" value="Strongly disagree">
              Strongly disagree
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">
            Reducing the regulatory power of the Environmental Protection Agency (EPA) would improve the economic efficiency of the U.S. economy.
          </label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="agree_02" value="Strongly agree" required>
              Strongly agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_02" value="Somewhat agree">
              Somewhat agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_02" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="agree_02" value="Somewhat disagree">
              Somewhat disagree
            </label>
            <label class="radio">
              <input type="radio" name="agree_02" value="Strongly disagree">
              Strongly disagree
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">
            Communities that exist close to hazardous waste sites are aware and accepting of the hazardous waste site(s) near their home.
          </label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="agree_03" value="Strongly agree" required>
              Strongly agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_03" value="Somewhat agree">
              Somewhat agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_03" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="agree_03" value="Somewhat disagree">
              Somewhat disagree
            </label>
            <label class="radio">
              <input type="radio" name="agree_03" value="Strongly disagree">
              Strongly disagree
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">
            The free market, property rights, and tort law provide the best tools to preserve the health and sustainability of the environment.
          </label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="agree_04" value="Strongly agree" required>
              Strongly agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_04" value="Somewhat agree">
              Somewhat agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_04" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="agree_04" value="Somewhat disagree">
              Somewhat disagree
            </label>
            <label class="radio">
              <input type="radio" name="agree_04" value="Strongly disagree">
              Strongly disagree
            </label>

            <p class="help is-info" style="font-size: 0.9em; line-height: 1.5; color: #1c4982; margin-left: 0;">
              <strong>Tort law</strong> is the body of law that lets people sue for harm caused by others’ actions.
              In environmental cases, this means affected individuals or communities can seek compensation
              or court orders to stop harmful activity (e.g., for toxic emissions or water contamination).
            </p>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">Economic growth always harms the environment.</label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="agree_05" value="Strongly agree" required>
              Strongly agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_05" value="Somewhat agree">
              Somewhat agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_05" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="agree_05" value="Somewhat disagree">
              Somewhat disagree
            </label>
            <label class="radio">
              <input type="radio" name="agree_05" value="Strongly disagree">
              Strongly disagree
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">
            Carbon markets and carbon offsets are an efficient mechanism for private firms to meet their carbon reduction goals.
          </label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="agree_06" value="Strongly agree" required>
              Strongly agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_06" value="Somewhat agree">
              Somewhat agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_06" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="agree_06" value="Somewhat disagree">
              Somewhat disagree
            </label>
            <label class="radio">
              <input type="radio" name="agree_06" value="Strongly disagree">
              Strongly disagree
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">
            Emissions tax or permit auction revenues should be returned to the public through dividends or lower income taxes.
          </label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="agree_07" value="Strongly agree" required>
              Strongly agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_07" value="Somewhat agree">
              Somewhat agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_07" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="agree_07" value="Somewhat disagree">
              Somewhat disagree
            </label>
            <label class="radio">
              <input type="radio" name="agree_07" value="Strongly disagree">
              Strongly disagree
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">
            Emissions tax or permit auction revenues should be used to reduce the national debt.
          </label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="agree_08" value="Strongly agree" required>
              Strongly agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_08" value="Somewhat agree">
              Somewhat agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_08" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="agree_08" value="Somewhat disagree">
              Somewhat disagree
            </label>
            <label class="radio">
              <input type="radio" name="agree_08" value="Strongly disagree">
              Strongly disagree
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">
            Emissions standards are rigid, and insensitive to geographical and technological differences.
          </label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="agree_09" value="Strongly agree" required>
              Strongly agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_09" value="Somewhat agree">
              Somewhat agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_09" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="agree_09" value="Somewhat disagree">
              Somewhat disagree
            </label>
            <label class="radio">
              <input type="radio" name="agree_09" value="Strongly disagree">
              Strongly disagree
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">
            There exists a maximum level of economic growth that can be sustained without undermining the resource base upon which it depends.
          </label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="agree_10" value="Strongly agree" required>
              Strongly agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_10" value="Somewhat agree">
              Somewhat agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_10" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="agree_10" value="Somewhat disagree">
              Somewhat disagree
            </label>
            <label class="radio">
              <input type="radio" name="agree_10" value="Strongly disagree">
              Strongly disagree
            </label>
          </div>
        </div>

        <div class="question-block field">
          <label class="label">Population growth inevitably degrades the environment.</label>
          <div class="control">
            <label class="radio">
              <input type="radio" name="agree_11" value="Strongly agree" required>
              Strongly agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_11" value="Somewhat agree">
              Somewhat agree
            </label>
            <label class="radio">
              <input type="radio" name="agree_11" value="Neutral">
              Neutral
            </label>
            <label class="radio">
              <input type="radio" name="agree_11" value="Somewhat disagree">
              Somewhat disagree
            </label>
            <label class="radio">
              <input type="radio" name="agree_11" value="Strongly disagree">
              Strongly disagree
            </label>
          </div>
        </div>

        <!-- ===================== Submit / Cancel ===================== -->
        <div class="sticky-submit">
          <div class="field is-grouped">
            <div class="control">
              <button class="button is-primary" type="submit" id="submit-button">
                Submit
              </button>
            </div>
            <div class="control">
              <button class="button is-danger" type="button">Cancel</button>
            </div>
          </div>
        </div>
      </form>

      <div
        id="message"
        style="
          display: none;
          font-weight: bold;
          color: green;
          padding: 8px;
          background-color: beige;
          border-radius: 4px;
          border-color: aquamarine;
        "
      ></div>
    </div>
  </section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("form");
    const submitButton = document.getElementById("submit-button");
    const messageDiv = document.getElementById("message");

    // Ensure Cancel isn't submitting the form
    const cancelButton = form.querySelector("button.is-danger");
    if (cancelButton) {
      cancelButton.type = "button";
      cancelButton.addEventListener("click", () => {
        form.reset();
        messageDiv.style.display = "none";
        messageDiv.textContent = "";
      });
    }

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      // First, check validity so required questions are answered
      if (!form.checkValidity()) {
        form.reportValidity();
        return;
      }

      // Immediate feedback
      messageDiv.textContent = "Submitting your responses...";
      messageDiv.style.display = "block";
      messageDiv.style.backgroundColor = "beige";
      messageDiv.style.color = "black";

      submitButton.disabled = true;
      submitButton.classList.add("is-loading");

      try {
        // Build URL-encoded body (matches your Apps Script parser)
        const params = new URLSearchParams();
        for (const [k, v] of new FormData(form).entries()) {
          params.append(k, v);
        }

        const scriptURL =
          "https://script.google.com/macros/s/AKfycbzgzYwLEnkCJo0rp4ZUmk3_b5sDtIcs40xA_I_GZm9tRII9DyRSCjEslpTG0NwrfLHUYQ/exec";

        // Use no-cors to avoid CORS errors; we won't read the response
        await fetch(scriptURL, {
          method: "POST",
          mode: "no-cors",
          headers: {
            "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8",
          },
          body: params.toString(),
        });

        // If we got here without throwing, treat as success
        const completionCode = "ECON340-ENV-2025";

        messageDiv.innerHTML = `
          <div>
            <strong>Thank you! ✅ Your responses have been recorded.</strong><br><br>
            This survey is anonymous.<br><br>
            <strong>Completion code:</strong> <code>${completionCode}</code><br>
            Please copy or write down this code and enter it in the Brightspace homework item
            to receive the credit.<br><br>
            You may now close this page or return to Brightspace when you are ready.
          </div>
        `;
        messageDiv.style.backgroundColor = "#48c78e"; // Bulma success
        messageDiv.style.color = "white";

        form.reset();
      } catch (err) {
        console.error(err);
        messageDiv.textContent = "Error submitting form: " + err.message;
        messageDiv.style.backgroundColor = "#f14668"; // Bulma danger
        messageDiv.style.color = "white";
      } finally {
        submitButton.disabled = false;
        submitButton.classList.remove("is-loading");
        setTimeout(() => {
          messageDiv.textContent = "";
          messageDiv.style.display = "none";
        }, 12000); // keep visible longer (12 seconds)
      }
    });
  });
</script>
</body>
</html>